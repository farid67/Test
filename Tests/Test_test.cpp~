#define BOOST_TEST_MODULE MonTest
#define BOOST_AUTO_TEST_MAIN
#include "test.hpp"
#include <boost/test/unit_test.hpp>
#include <boost/test/results_reporter.hpp>

using namespace std;


std::ofstream out;


//~ BOOST_TEST_OUTPUT_FORMAT(XML)

BOOST_AUTO_TEST_CASE(constructor_test)
{
    Test t("Jean");
    BOOST_CHECK_EQUAL(t.return_string,"Hello Jean");
}

BOOST_AUTO_TEST_CASE(length_test)
{
    Test t2("Pierre");
    BOOST_CHECK_EQUAL(t2.return_string.length(),strlen("Hello Pierre"));
}

struct ReportRedirector
{
    ReportRedirector()
    {
        out.open("test_results.xml");
        assert( out.is_open() );
        boost::unit_test::results_reporter::set_stream(out);
    }
};

BOOST_GLOBAL_FIXTURE(ReportRedirector)
